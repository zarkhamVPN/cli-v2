import{c as wt,a as m,f as N,s as P,d as oe}from"../chunks/DuPdJHn-.js";import{i as Ot}from"../chunks/C8KfsYp1.js";import{f as G,s as f,c,r as l,p as zt,bd as Ut,be as ve,t as vt,j as J,g as a,m as U,a as Ht,b as E,o as ge,bf as pe,n as xt,d as De,D as wr,bg as yr}from"../chunks/DSgLDTuV.js";import{l as Vt,s as Kt,b as le,i as Y,a as Fe,p as Ae}from"../chunks/Bd2GTLSr.js";import{a as Ue,c as bt,X as kr,b as Cr}from"../chunks/DdlkSj21.js";import{I as Wt,p as Lt,e as Bt,i as Pt,q as Ze,k as Er,j as Sr,f as ce,r as te,s as Ct,t as Xe,n as Nr,u as Tr,v as Ar,g as Ie,a as Ir,d as Mr,c as Br,w as Pr,h as $r,x as Lr}from"../chunks/BOCHFRgo.js";import{S as ee,b as re}from"../chunks/DPVc3x-C.js";import{A as tr,R as je,W as Rr}from"../chunks/DLBYPnHy.js";import{S as Ge,C as Dr,T as Fr}from"../chunks/Dk4e6pGU.js";import{Z as Me}from"../chunks/DiX0xybV.js";import{A as er,N as Ur,S as jr}from"../chunks/p9DgcaUT.js";import{C as Be}from"../chunks/2v6vXdcM.js";import{L as Or,W as zr}from"../chunks/W_FWWow5.js";import{b as Hr}from"../chunks/C6H6EZ1_.js";function Vr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M17 7 7 17"}],["path",{d:"M17 17H7V7"}]];Wt(r,Kt({name:"arrow-down-left"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function Kr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M7 7h10v10"}],["path",{d:"M7 17 17 7"}]];Wt(r,Kt({name:"arrow-up-right"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function Wr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}]];Wt(r,Kt({name:"chart-pie"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function Jr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]];Wt(r,Kt({name:"clock"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function Gr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];Wt(r,Kt({name:"file-text"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function Yr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Wt(r,Kt({name:"loader-circle"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}function rr(r,t){const i=Vt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"M12 2v10"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04"}]];Wt(r,Kt({name:"power"},()=>i,{get iconNode(){return o},children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}))}var qr=N('<div class="relative group"><div class="absolute top-0 left-0 w-3 h-3 border-l-2 border-t-2 border-primary/50 group-hover:border-primary transition-colors z-20"></div> <div class="absolute top-0 right-0 w-3 h-3 border-r-2 border-t-2 border-primary/50 group-hover:border-primary transition-colors z-20"></div> <div class="absolute bottom-0 left-0 w-3 h-3 border-l-2 border-b-2 border-primary/50 group-hover:border-primary transition-colors z-20"></div> <div class="absolute bottom-0 right-0 w-3 h-3 border-r-2 border-b-2 border-primary/50 group-hover:border-primary transition-colors z-20"></div> <!></div>');function jt(r,t){var i=qr(),o=f(c(i),8);ee(o,{children:(e,n)=>{var d=wt(),s=G(d);Lt(s,t,"default",{}),m(e,d)},$$slots:{default:!0}}),l(i),m(r,i)}var Qr=N('<div class="flex flex-col items-center justify-center gap-4 p-8"><div class="w-12 h-12 border-4 border-primary/30 border-t-primary rounded-full animate-spin"></div> <span class="text-xs font-mono text-primary animate-pulse tracking-widest">SCANNING...</span></div>');function he(r){var t=Qr();m(r,t)}var Zr=N('<div class="bg-card border border-border p-3 flex justify-between items-center text-sm"><span> </span> <span class="font-mono text-muted-foreground"> </span></div>'),Xr=N('<div class="text-center text-muted-foreground text-xs italic py-4">No recent activity</div>'),tn=N('<div class="mt-8"><div class="flex justify-between items-center mb-4"><h3 class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Recent Activity</h3> <span class="text-xs text-primary flex items-center gap-1">VIEW ALL <!></span></div> <div class="space-y-2"><!> <!></div></div>');function en(r,t){zt(t,!1);const i=()=>le(Ue,"$activeMode",o),[o,e]=Fe();let n=U([]);async function d(){const k=await Ze(i()),j=[...k.solHistory,...k.arkhamHistory,...k.connectionHistory,...k.throughputHistory].sort((b,C)=>new Date(C.timestamp).getTime()-new Date(b.timestamp).getTime());E(n,j.slice(0,3))}Ut(()=>i(),()=>{i()&&d()}),ve(),Ot();var s=tn(),u=c(s),v=f(c(u),2),p=f(c(v));tr(p,{class:"w-3 h-3"}),l(v),l(u);var A=f(u,2),g=c(A);Bt(g,1,()=>a(n),Pt,(k,j)=>{var b=Zr(),C=c(b),y=c(C,!0);l(C);var w=f(C,2),I=c(w,!0);l(w),l(b),vt(O=>{P(y,(a(j),J(()=>a(j).type||"Transaction"))),P(I,O)},[()=>(a(j),J(()=>new Date(a(j).timestamp).toLocaleTimeString()))]),m(k,b)});var h=f(g,2);{var x=k=>{var j=Xr();m(k,j)};Y(h,k=>{a(n),J(()=>a(n).length===0)&&k(x)})}l(A),l(s),m(r,s),Ht(),e()}var rn=N('<div class="h-[60vh] flex items-center justify-center"><!></div>'),nn=N('<button><!> <span class="font-bold tracking-widest"> </span></button>'),on=N(`<div class="border border-primary/50 bg-primary/5 p-12 text-center flex flex-col items-center"><!> <h3 class="text-2xl font-bold mb-2">UNREGISTERED NODE</h3> <p class="text-muted-foreground max-w-md mb-8">This node identity is not yet registered on the Solana blockchain.
                    Stake tokens to begin providing bandwidth.</p> <button class="bg-primary text-black px-8 py-3 font-bold hover:bg-white transition-colors">INITIALIZE WARDEN</button></div>`),an=N('<div class="flex justify-between mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Staked</span> <!></div> <div class="text-3xl font-bold text-white mb-1"> <span class="text-lg text-muted-foreground">SOL</span></div> <button class="text-[10px] text-primary hover:underline mt-2 flex items-center gap-1 uppercase font-bold tracking-tighter"> </button>',1),sn=N('<div class="flex justify-between mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">SOL Earnings</span> <!></div> <div class="text-3xl font-bold text-white mb-1"> </div> <p class="text-xs text-muted-foreground mt-2">Lifetime SOL revenue</p>',1),dn=N('<div class="flex justify-between mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Zarkham Earnings</span> <!></div> <div class="text-3xl font-bold text-white mb-1"> </div> <p class="text-xs text-muted-foreground mt-2">Lifetime token rewards</p>',1),ln=N('<div class="flex justify-between mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Sessions</span> <!></div> <div class="text-3xl font-bold text-white mb-1"> </div> <div class="flex items-center gap-2 mt-2"><div></div> <span class="text-xs text-muted-foreground uppercase"> </span></div>',1),cn=N('<div class="flex justify-between items-center mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Node Identity</span> <!></div> <div class="flex items-center justify-between bg-black border border-border p-3 group hover:border-primary/30 transition-colors"><span class="text-xs font-mono text-muted-foreground truncate w-full mr-2"> </span> <button class="text-muted-foreground hover:text-primary transition-colors" title="Copy Peer ID"><!></button></div> <div class="mt-2 text-xs flex justify-between uppercase font-mono tracking-widest"><span class="text-muted-foreground">Uptime Velocity</span> <span class="text-green-500 font-bold"> </span></div>',1),un=N('<div class="flex justify-between items-center mb-4"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Direct Connect</span> <!></div> <div class="flex items-center justify-between bg-black border border-border p-3 group hover:border-primary/30 transition-colors"><span class="text-xs font-mono text-muted-foreground truncate w-full mr-2"> </span> <button class="text-muted-foreground hover:text-primary transition-colors" title="Copy Multiaddr"><!></button></div> <div class="mt-2 text-xs flex justify-between uppercase font-mono tracking-widest"><span class="text-muted-foreground">Bandwidth Served</span> <span class="text-white font-bold"> </span></div>',1),fn=N('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"><!> <!> <!> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"><!> <!></div> <!>',1),vn=N('<div class="flex justify-between items-center"><div><h2 class="text-3xl font-bold uppercase tracking-tighter">Warden Command</h2> <p class="text-sm text-muted-foreground">Network relay management.</p></div> <!></div> <!>',1),gn=N('<div class="fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 backdrop-blur-sm"><div class="bg-card border border-primary w-full max-w-md p-8 relative"><button class="absolute top-4 right-4 text-muted-foreground hover:text-white">✕</button> <h3 class="text-2xl font-bold mb-6">Initialize Node</h3> <div class="space-y-4"><div><label class="block text-xs font-mono text-muted-foreground mb-2">STAKE TOKEN</label> <div class="grid grid-cols-2 gap-2"><button>SOL</button> <button>USDC</button></div></div> <div><label class="block text-xs font-mono text-muted-foreground mb-2">AMOUNT</label> <input type="number" class="w-full bg-black border border-border p-3 text-white focus:border-primary outline-none"/></div></div> <button class="w-full bg-primary text-black font-bold py-3 mt-8 hover:bg-white transition-colors">CONFIRM STAKE</button></div></div>'),pn=N('<div class="fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 backdrop-blur-sm"><div class="bg-card border border-border p-8 w-full max-w-sm text-center"><h3 class="text-xl font-bold mb-6">Asset Allocation</h3> <div class="relative w-48 h-48 mx-auto rounded-full"><div class="absolute inset-4 bg-card rounded-full flex items-center justify-center"><div class="text-center"><span class="block text-2xl font-bold text-primary"> </span> <span class="text-xs text-muted-foreground">STAKED</span></div></div></div> <div class="mt-6 flex justify-between text-xs"><div class="text-left"><span class="block text-primary font-bold"> </span> <span class="text-muted-foreground">Locked</span></div> <div class="text-right"><span class="block text-white font-bold"> </span> <span class="text-muted-foreground">Liquid</span></div></div></div></div>'),hn=N('<div class="space-y-8"><!> <!> <!></div>');function mn(r,t){zt(t,!1);let i=U(!1),o=U(!1),e=U(null),n=U(null),d=U(0),s=U(!0),u=U(!1),v=U(!1),p,A=U(1),g=U("SOL");ge(()=>{h(),p=setInterval(h,2e3)}),pe(()=>{p&&clearInterval(p)});async function h(){a(s)&&a(e);try{const[R,q,T]=await Promise.all([Er(),Sr("warden"),ce("warden")]);E(n,R),E(o,R.isRunning),E(i,q.is_registered),E(e,q.warden),E(d,T.lamports/1e9)}catch(R){console.error(R)}finally{E(s,!1)}}async function x(){try{a(o)?(await Tr(),bt("Warden Node Stopped","info")):(await Ar(),bt("Warden Node Started","success")),await h()}catch{bt("Command failed","error")}}async function k(){try{await Nr("warden",a(g),a(A)),bt("Registration Successful","success"),E(u,!1),await h()}catch(R){bt("Registration Failed: "+R,"error")}}function j(){var R;(R=a(e))!=null&&R.peerId&&(navigator.clipboard.writeText(a(e).peerId),bt("Peer ID copied","info"))}function b(){var R;(R=a(n))!=null&&R.p2pMultiaddr&&(navigator.clipboard.writeText(a(n).p2pMultiaddr),bt("Multiaddr copied","info"))}function C(){var q;if(!((q=a(e))!=null&&q.stakeAmount)||!a(d))return 0;const R=a(e).stakeAmount/1e9;return R/(R+a(d))*100}Ot();var y=hn(),w=c(y);{var I=R=>{var q=rn(),T=c(q);he(T),l(q),m(R,q)},O=R=>{var q=vn(),T=G(q),M=f(c(T),2);{var H=$=>{var S=nn();S.__click=x;var _=c(S);{let Z=De(()=>a(o)?"animate-pulse":"");rr(_,{get class(){return`w-5 h-5 ${a(Z)??""}`}})}var L=f(_,2),K=c(L,!0);l(L),l(S),vt(()=>{Ct(S,1,`flex items-center gap-3 px-6 py-3 border transition-all duration-300 ${a(o)?"bg-green-500/10 border-green-500 text-green-500 hover:bg-green-500/20":"bg-red-500/10 border-red-500 text-red-500 hover:bg-red-500/20"}`),P(K,a(o)?"ONLINE":"OFFLINE")}),m($,S)};Y(M,$=>{a(i)&&$(H)})}l(T);var X=f(T,2);{var ct=$=>{var S=on(),_=c(S);Ge(_,{class:"w-16 h-16 text-primary mb-6"});var L=f(_,6);L.__click=()=>E(u,!0),l(S),m($,S)},it=$=>{var S=fn(),_=G(S),L=c(_);jt(L,{children:(W,et)=>{var D=an(),B=G(D),rt=f(c(B),2);Wr(rt,{class:"w-5 h-5 text-primary"}),l(B);var Q=f(B,2),nt=c(Q);xt(),l(Q);var F=f(Q,2);F.__click=()=>E(v,!0);var z=c(F);l(F),vt((ft,at)=>{P(nt,`${ft??""} `),P(z,`${at??""}% of liquid balance. Visualize →`)},[()=>{var ft;return(((ft=a(e))==null?void 0:ft.stakeAmount)/1e9||0).toFixed(2)},()=>C().toFixed(1)]),m(W,D)},$$slots:{default:!0}});var K=f(L,2);jt(K,{children:(W,et)=>{var D=sn(),B=G(D),rt=f(c(B),2);Me(rt,{class:"w-5 h-5 text-primary"}),l(B);var Q=f(B,2),nt=c(Q,!0);l(Q),xt(2),vt(F=>P(nt,F),[()=>{var F;return(((F=a(e))==null?void 0:F.totalEarnings)/1e9||0).toFixed(4)}]),m(W,D)},$$slots:{default:!0}});var Z=f(K,2);jt(Z,{children:(W,et)=>{var D=dn(),B=G(D),rt=f(c(B),2);Me(rt,{class:"w-5 h-5 text-primary"}),l(B);var Q=f(B,2),nt=c(Q,!0);l(Q),xt(2),vt(F=>P(nt,F),[()=>{var F;return(((F=a(e))==null?void 0:F.arkhamTokensEarned)/1e9||0).toFixed(4)}]),m(W,D)},$$slots:{default:!0}});var dt=f(Z,2);jt(dt,{children:(W,et)=>{var D=ln(),B=G(D),rt=f(c(B),2);er(rt,{class:"w-5 h-5 text-primary"}),l(B);var Q=f(B,2),nt=c(Q,!0);l(Q);var F=f(Q,2),z=c(F),ft=f(z,2),at=c(ft,!0);l(ft),l(F),vt(()=>{var ht,mt,st;P(nt,((ht=a(e))==null?void 0:ht.activeConnections)||0),Ct(z,1,`w-2 h-2 rounded-none ${(((mt=a(e))==null?void 0:mt.activeConnections)||0)>0?"bg-green-500 animate-pulse":"bg-red-500"}`),P(at,(((st=a(e))==null?void 0:st.activeConnections)||0)>0?"Connected":"Idle")}),m(W,D)},$$slots:{default:!0}}),l(_);var tt=f(_,2),ot=c(tt);ee(ot,{children:(W,et)=>{var D=cn(),B=G(D),rt=f(c(B),2);Dr(rt,{class:"w-4 h-4 text-green-500"}),l(B);var Q=f(B,2),nt=c(Q),F=c(nt,!0);l(nt);var z=f(nt,2);z.__click=j;var ft=c(z);Be(ft,{class:"w-4 h-4"}),l(z),l(Q);var at=f(Q,2),ht=f(c(at),2),mt=c(ht);l(ht),l(at),vt(st=>{var kt;P(F,(kt=a(e))==null?void 0:kt.peerId),P(mt,`${st??""}%`)},[()=>{var st;return(((st=a(e))==null?void 0:st.uptimePercentage)/100||0).toFixed(1)}]),m(W,D)},$$slots:{default:!0}});var lt=f(ot,2);ee(lt,{children:(W,et)=>{var D=un(),B=G(D),rt=f(c(B),2);Ge(rt,{class:"w-4 h-4 text-primary"}),l(B);var Q=f(B,2),nt=c(Q),F=c(nt,!0);l(nt);var z=f(nt,2);z.__click=b;var ft=c(z);Be(ft,{class:"w-4 h-4"}),l(z),l(Q);var at=f(Q,2),ht=f(c(at),2),mt=c(ht);l(ht),l(at),vt(st=>{var kt;P(F,((kt=a(n))==null?void 0:kt.p2pMultiaddr)||"Not available"),P(mt,`${st??""} GB`)},[()=>{var st;return(((st=a(e))==null?void 0:st.totalBandwidthServed)/1024).toFixed(2)}]),m(W,D)},$$slots:{default:!0}}),l(tt);var ut=f(tt,2);en(ut,{}),m($,S)};Y(X,$=>{a(i)?$(it,!1):$(ct)})}m(R,q)};Y(w,R=>{a(s)?R(I):R(O,!1)})}var V=f(w,2);{var gt=R=>{var q=gn(),T=c(q),M=c(T);M.__click=()=>E(u,!1);var H=f(M,4),X=c(H),ct=f(c(X),2),it=c(ct);it.__click=()=>E(g,"SOL");var $=f(it,2);$.__click=()=>E(g,"USDC"),l(ct),l(X);var S=f(X,2),_=f(c(S),2);te(_),l(S),l(H);var L=f(H,2);L.__click=k,l(T),l(q),vt(()=>{Ct(it,1,`border px-4 py-2 ${a(g)==="SOL"?"bg-primary text-black border-primary":"border-border text-muted-foreground"}`),Ct($,1,`border px-4 py-2 ${a(g)==="USDC"?"bg-primary text-black border-primary":"border-border text-muted-foreground"}`)}),re(_,()=>a(A),K=>E(A,K)),m(R,q)};Y(V,R=>{a(u)&&R(gt)})}var _t=f(V,2);{var pt=R=>{var q=pn();q.__click=()=>E(v,!1);var T=c(q);T.__click=tt=>tt.stopPropagation();var M=f(c(T),2),H=c(M),X=c(H),ct=c(X),it=c(ct);l(ct),xt(2),l(X),l(H),l(M);var $=f(M,2),S=c($),_=c(S),L=c(_);l(_),xt(2),l(S);var K=f(S,2),Z=c(K),dt=c(Z);l(Z),xt(2),l(K),l($),l(T),l(q),vt((tt,ot,lt,ut,W)=>{Xe(M,`background: conic-gradient(#fed600 0% ${tt??""}%, #333 ${ot??""}% 100%);`),P(it,`${lt??""}%`),P(L,`${ut??""} SOL`),P(dt,`${W??""} SOL`)},[C,C,()=>C().toFixed(1),()=>(a(e).stakeAmount/1e9).toFixed(2),()=>a(d).toFixed(2)]),m(R,q)};Y(_t,R=>{a(v)&&R(pt)})}l(y),m(r,y),Ht()}oe(["click"]);var bn=N('<div class="flex flex-col items-center justify-center py-8"><!> <span class="text-sm text-muted-foreground">Resolving Peer...</span></div>'),_n=N('<div class="bg-red-900/20 border border-red-500/50 p-3 rounded flex flex-col gap-2"><div class="flex items-center gap-2 text-red-500 text-xs font-bold"><!> INSUFFICIENT ESCROW</div> <p class="text-xs text-muted-foreground"> </p> <button class="w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 text-xs rounded"> </button></div>'),xn=N('<button class="w-full bg-primary hover:bg-white text-black font-bold py-3 transition-colors"> </button>'),wn=N('<div class="space-y-4"><div class="bg-muted/20 p-4 rounded-lg"><div class="flex justify-between text-sm mb-1"><span class="text-muted-foreground">Warden</span> <span class="font-mono text-white"> </span></div> <div class="flex justify-between text-sm"><span class="text-muted-foreground">Rate</span> <div class="text-right"><span class="text-primary font-bold block"> </span> <span class="text-xs text-muted-foreground"> </span></div></div></div> <div><label class="block text-xs font-mono text-muted-foreground mb-2">ESTIMATED DATA (MB)</label> <input type="number" class="w-full bg-black border border-border p-3 text-white focus:border-primary outline-none"/></div> <div class="space-y-2 text-sm"><div class="flex justify-between"><span class="text-muted-foreground">Estimated Cost</span> <div class="text-right"><span class="block"> </span> <span class="text-xs text-muted-foreground"> </span></div></div> <div class="flex justify-between items-center"><span class="text-muted-foreground">Escrow Balance</span> <div class="flex items-center gap-2"><span> </span> <button title="Refresh Balance" class="hover:text-primary"><!></button></div></div></div> <!></div>'),yn=N('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4"><div class="w-full max-w-md rounded-lg bg-card border border-border p-6 space-y-6"><div class="flex items-center justify-between border-b border-border pb-4"><h2 class="text-xl font-bold">Direct Connect</h2> <button class="text-muted-foreground hover:text-white"><!></button></div> <!></div></div>');function kn(r,t){zt(t,!1);const i=U(),o=U(),e=U(),n=U();let d=Ae(t,"multiaddr",8),s=Ae(t,"onclose",8),u=U(!0),v=U(!1),p=U(!1),A=U(null),g=U(0),h=U(0),x=U(0),k=U("100"),j;ge(()=>{C(),j=setInterval(b,2e3)}),pe(()=>{j&&clearInterval(j)});async function b(){try{const T=await ce("seeker");E(g,T.lamports/1e9);const M=await Ie("seeker");M.seeker&&E(h,M.seeker.escrowBalance/1e9)}catch{}}async function C(){E(u,!0);try{try{const $=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd")).json();E(x,$.solana.usd)}catch{E(x,150)}const T=d().match(/\/p2p\/([a-zA-Z0-9]+)/);if(!T)throw new Error("Invalid multiaddress: Missing Peer ID");const M=T[1],H=await fetch(`/api/warden/lookup?peer_id=${M}`);if(!H.ok)throw new Error("Warden not found on-chain");E(A,await H.json());const X=await ce("seeker");E(g,X.lamports/1e9);const ct=await Ie("seeker");ct.seeker&&E(h,ct.seeker.escrowBalance/1e9)}catch(T){bt(T.message,"error")}finally{E(u,!1)}}async function y(){if(!a(n)){bt("Insufficient wallet balance","error");return}E(p,!0);try{const T=Math.ceil(a(e)*1e9)+1e5,M=await fetch("/api/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:T})});if(!M.ok)throw new Error(await M.text());bt("Deposit sent. Waiting for confirmation...","info"),await new Promise(H=>setTimeout(H,5e3)),await C(),bt("Deposit confirmed!","success")}catch(T){bt("Deposit failed: "+T.message,"error")}finally{E(p,!1)}}async function w(){E(v,!0);try{bt("Initializing Secure Link...","info");const T=await fetch("/api/node/connect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({multiaddr:d(),estimatedMb:parseInt(a(k))})});if(!T.ok)throw new Error(await T.text());bt("Connection Established!","success"),s()()}catch(T){bt("Connection Failed: "+T.message,"error")}finally{E(v,!1)}}Ut(()=>(a(A),a(k)),()=>{E(i,a(A)?(parseInt(a(k))||0)*(a(A).price||0)/1e9:0)}),Ut(()=>(a(i),a(x)),()=>{E(o,a(i)*a(x))}),Ut(()=>(a(i),a(h)),()=>{E(e,Math.max(0,a(i)-a(h)))}),Ut(()=>(a(g),a(e)),()=>{E(n,a(g)>=a(e))}),ve(),Ot();var I=yn();I.__click=function(...T){var M;(M=s())==null||M.apply(this,T)};var O=c(I);O.__click=T=>T.stopPropagation();var V=c(O),gt=f(c(V),2);gt.__click=function(...T){var M;(M=s())==null||M.apply(this,T)};var _t=c(gt);kr(_t,{class:"w-6 h-6"}),l(gt),l(V);var pt=f(V,2);{var R=T=>{var M=bn(),H=c(M);Yr(H,{class:"w-8 h-8 animate-spin text-primary mb-2"}),xt(2),l(M),m(T,M)},q=T=>{var M=wt(),H=G(M);{var X=ct=>{var it=wn(),$=c(it),S=c($),_=f(c(S),2),L=c(_);l(_),l(S);var K=f(S,2),Z=f(c(K),2),dt=c(Z),tt=c(dt);l(dt);var ot=f(dt,2),lt=c(ot);l(ot),l(Z),l(K),l($);var ut=f($,2),W=f(c(ut),2);te(W),l(ut);var et=f(ut,2),D=c(et),B=f(c(D),2),rt=c(B),Q=c(rt);l(rt);var nt=f(rt,2),F=c(nt);l(nt),l(B),l(D);var z=f(D,2),ft=f(c(z),2),at=c(ft),ht=c(at);l(at);var mt=f(at,2);mt.__click=C;var st=c(mt);je(st,{class:"w-3 h-3"}),l(mt),l(ft),l(z),l(et);var kt=f(et,2);{var yt=St=>{var Et=_n(),Tt=c(Et),Dt=c(Tt);Fr(Dt,{class:"w-4 h-4"}),xt(),l(Tt);var Ft=f(Tt,2),Qt=c(Ft);l(Ft);var Mt=f(Ft,2);Mt.__click=y;var we=c(Mt,!0);l(Mt),l(Et),vt((Zt,ye)=>{P(Qt,`You need ${Zt??""} more SOL in escrow.`),Mt.disabled=a(p),P(we,ye)},[()=>(a(e),J(()=>a(e).toFixed(6))),()=>(a(p),a(e),J(()=>a(p)?"DEPOSITING...":`DEPOSIT ${(a(e)+1e-4).toFixed(4)} SOL`))]),m(St,Et)},It=St=>{var Et=xn();Et.__click=w;var Tt=c(Et,!0);l(Et),vt(()=>{Et.disabled=a(v),P(Tt,a(v)?"CONNECTING...":"START CONNECTION")}),m(St,Et)};Y(kt,St=>{a(e)>0?St(yt):St(It,!1)})}l(it),vt((St,Et,Tt,Dt,Ft,Qt)=>{P(L,`${St??""}...`),P(tt,`${Et??""} SOL / MB`),P(lt,`≈ $${Tt??""}`),P(Q,`${Dt??""} SOL`),P(F,`≈ $${Ft??""}`),Ct(at,1,a(e)>0?"text-red-500":"text-green-500"),P(ht,`${Qt??""} SOL`)},[()=>(a(A),J(()=>a(A).peerId.slice(0,8))),()=>(a(A),J(()=>(a(A).price/1e9).toFixed(6))),()=>(a(A),a(x),J(()=>(a(A).price/1e9*a(x)).toFixed(6))),()=>(a(i),J(()=>a(i).toFixed(6))),()=>(a(o),J(()=>a(o).toFixed(2))),()=>(a(h),J(()=>a(h).toFixed(6)))]),re(W,()=>a(k),St=>E(k,St)),m(ct,it)};Y(H,ct=>{a(A)&&ct(X)},!0)}m(T,M)};Y(pt,T=>{a(u)?T(R):T(q,!1)})}l(O),l(I),m(r,I),Ht()}oe(["click"]);var Cn=N("<!> Disconnecting in progress...",1),En=N("<!> Secure Uplink Active",1),Sn=N('<div class="h-4 w-px bg-green-500/30"></div> <button class="text-red-500 hover:text-red-400 transition-colors p-1 hover:bg-red-500/10" title="Terminate Connection"><!></button>',1),Nn=N("<div></div> <div><div><!></div> <!></div>",1),Tn=N('<div class="h-[200px] flex items-center justify-center"><!></div>'),An=N('<div class="text-5xl font-bold text-white mb-2 uppercase tracking-tighter">Connected</div> <p class="text-sm text-muted-foreground font-mono">Tunnel established via WireGuard.<br/> Traffic routed through Warden node.</p>',1),In=N('<div class="text-5xl font-bold text-yellow-500 mb-2 uppercase tracking-tighter">Closing</div> <p class="text-sm text-yellow-500/70 font-mono italic">Finalizing bandwidth proofs on-chain.<br/> Tearing down encrypted tunnel.</p>',1),Mn=N('<div class="text-5xl font-bold text-yellow-500 mb-2 uppercase tracking-tighter">Lingering</div> <p class="text-sm text-yellow-500/70 font-mono italic">Local link is down, but on-chain session is still active.<br/> Terminate to stop billing.</p>',1),Bn=N('<div class="flex justify-between mb-6"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">On-Chain Session</span> <!></div> <!> <div><div>Encryption & Integrity</div> <div class="text-lg font-bold text-white">ChaCha20-Poly1305</div></div>',1),Pn=N('<div class="flex justify-between mb-6"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest">Live Metrics</span> <!></div> <div class="space-y-4"><div><div class="flex justify-between text-xs mb-1 uppercase font-mono"><span>Relayed Data</span> <span class="text-primary font-bold"> </span></div> <div class="h-1 bg-secondary w-full"><div class="h-full bg-primary animate-pulse" style="width: 100%"></div></div></div> <div><div class="flex justify-between text-xs mb-1 uppercase font-mono"><span>Grid Latency</span> <span class="text-green-500 font-bold"> </span></div> <div class="h-1 bg-secondary w-full"><div class="h-full bg-green-500 transition-all duration-500"></div></div></div></div>',1),$n=N('<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-12"><!> <!></div>'),Ln=N('<div class="animate-pulse space-y-4"><div class="h-4 w-16 bg-muted/20 rounded"></div> <div class="h-6 w-3/4 bg-muted/20 rounded"></div> <div class="h-3 w-full bg-muted/20 rounded"></div></div>'),Rn=N('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>'),Dn=N('<div class="h-48 flex flex-col items-center justify-center border border-dashed border-border opacity-50"><!> <span class="text-xs font-mono">NO PUBLIC NODES DETECTED</span></div>'),Fn=N('<div class="flex justify-between items-start mb-4"><div class="font-mono text-[10px] bg-primary/10 text-primary px-2 py-1 border border-primary/20"> </div> <!></div> <p class="font-bold truncate uppercase tracking-tight"> </p> <p class="text-[10px] font-mono text-muted-foreground break-all mb-4"> </p> <div class="flex justify-between items-center border-t border-border pt-4 mt-auto"><span class="text-xs text-primary font-bold"> </span> <button class="text-xs bg-white text-black px-3 py-1 font-bold hover:bg-primary transition-colors disabled:opacity-50">CONNECT</button></div>',1),Un=N('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>'),jn=N('<div class="border border-border bg-card/50 p-6 flex flex-col md:flex-row gap-4 items-end"><div class="flex-1 w-full"><label class="block text-[10px] font-mono text-muted-foreground mb-2 flex items-center gap-2"><!> MANUAL PEER CONNECT</label> <input type="text" placeholder="Warden Multiaddr..." class="w-full bg-black border border-border p-3 text-sm focus:border-primary outline-none text-white font-mono placeholder:text-muted-foreground/30"/></div> <button class="bg-white/10 text-white px-6 py-3 text-sm font-bold border border-white/20 hover:bg-white/20 transition-colors">DIRECT CONNECT</button></div> <!>',1),On=N('<!> <div class="space-y-8 relative z-10"><div class="flex justify-between items-center"><div><h2 class="text-3xl font-bold uppercase tracking-tighter">Seeker Uplink</h2> <p class="text-sm text-muted-foreground">Secure tunnel management.</p></div></div> <!> <!></div>',1);function zn(r,t){zt(t,!1);let i=U([]),o=U(!0),e=U(!0),n=U(!1),d=U(!1),s=U(!1),u=null,v=U(""),p=U(!1),A=U(150),g=U(0),h=U(0),x,k,j;ge(()=>{I(),_t(),y(),b()}),pe(()=>{C()});function b(){C(),x=setInterval(O,5e3),k=setInterval(V,2e3),j=setInterval(I,2e3)}function C(){x&&clearInterval(x),k&&clearInterval(k),j&&clearInterval(j)}async function y(){try{const L=await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd")).json();E(A,L.solana.usd)}catch{}}async function w(){await Promise.all([I(),_t()])}async function I(){try{const _=await Ie("seeker");E(s,_.isDisconnecting),_.seeker&&(E(d,_.seeker.isLocalLinkActive),_.seeker.connectedWardenPDA?(E(n,!0),u=_.seeker,_.seeker.connectedWardenAuthority&&localStorage.setItem("last_warden_auth",_.seeker.connectedWardenAuthority)):(E(n,!1),u=null))}catch(_){console.error(_)}finally{E(o,!1)}}async function O(){if(!(!a(n)||!a(d)))try{const _=await fetch("/api/node/latency");_.ok&&E(g,await _.json())}catch{}}async function V(){if(!(!a(n)||!a(d)))try{const _=await fetch("/api/node/bandwidth");_.ok&&E(h,await _.json())}catch{}}function gt(_){if(_===0)return"0.00 B";const L=1024,K=["B","KB","MB","GB","TB"],Z=Math.floor(Math.log(_)/Math.log(L));return parseFloat((_/Math.pow(L,Z)).toFixed(2))+" "+K[Z]}async function _t(){E(e,!0);try{E(i,await Ir())}catch(_){console.error(_)}finally{E(e,!1)}}function pt(){if(!a(v)){bt("Please enter a multiaddress","error");return}E(p,!0)}async function R(){try{C();const _=(u==null?void 0:u.connectedWardenAuthority)||localStorage.getItem("last_warden_auth")||"";E(s,!0),E(n,!1),u=null,await Mr("seeker",_),bt("Link Terminated","info"),localStorage.removeItem("last_warden_auth"),setTimeout(()=>{b(),w()},1e4)}catch{bt("Disconnect Failed","error"),b()}}Ot();var q=On(),T=G(q);{var M=_=>{var L=Nn(),K=G(L),Z=f(K,2),dt=c(Z),tt=c(dt);{var ot=et=>{var D=Cn(),B=G(D);je(B,{class:"w-4 h-4 animate-spin"}),xt(),m(et,D)},lt=et=>{var D=En(),B=G(D);Or(B,{class:"w-4 h-4"}),xt(),m(et,D)};Y(tt,et=>{a(s)?et(ot):et(lt,!1)})}l(dt);var ut=f(dt,2);{var W=et=>{var D=Sn(),B=f(G(D),2);B.__click=R;var rt=c(B);rr(rt,{class:"w-5 h-5"}),l(B),m(et,D)};Y(ut,et=>{a(s)||et(W)})}l(Z),vt(()=>{Ct(K,1,`fixed inset-0 pointer-events-none z-40 border-[6px] ${a(s)?"border-yellow-500/50":"border-green-500/50"} animate-pulse shadow-[inset_0_0_50px_rgba(34,197,94,0.2)]`),Ct(Z,1,`fixed top-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 bg-black/90 backdrop-blur border-2 ${a(s)?"border-yellow-500":"border-green-500"} px-6 py-3 shadow-[0_0_30px_rgba(34,197,94,0.3)]`),Ct(dt,1,`flex items-center gap-2 ${a(s)?"text-yellow-500":"text-green-500"} font-bold tracking-widest uppercase`)}),m(_,L)};Y(T,_=>{(a(n)||a(s))&&_(M)})}var H=f(T,2),X=f(c(H),2);{var ct=_=>{var L=Tn(),K=c(L);he(K),l(L),m(_,L)},it=_=>{var L=wt(),K=G(L);{var Z=tt=>{var ot=$n(),lt=c(ot);jt(lt,{children:(W,et)=>{var D=Bn(),B=G(D),rt=f(c(B),2);{let at=De(()=>a(d)?"text-green-500":"text-yellow-500");er(rt,{get class(){return`w-5 h-5 ${a(at)??""}`}})}l(B);var Q=f(B,2);{var nt=at=>{var ht=An();xt(2),m(at,ht)},F=at=>{var ht=wt(),mt=G(ht);{var st=yt=>{var It=In();xt(2),m(yt,It)},kt=yt=>{var It=Mn();xt(2),m(yt,It)};Y(mt,yt=>{a(s)?yt(st):yt(kt,!1)},!0)}m(at,ht)};Y(Q,at=>{a(d)?at(nt):at(F,!1)})}var z=f(Q,2),ft=c(z);xt(2),l(z),vt(()=>{Ct(z,1,`mt-8 p-4 ${a(d)?"bg-green-500/5 border-green-500/20":"bg-yellow-500/5 border-yellow-500/20"} border rounded`),Ct(ft,1,`text-xs ${a(d)?"text-green-400":"text-yellow-400"} font-mono mb-1 uppercase tracking-tighter`)}),m(W,D)},$$slots:{default:!0}});var ut=f(lt,2);jt(ut,{children:(W,et)=>{var D=Pn(),B=G(D),rt=f(c(B),2);Me(rt,{class:"w-5 h-5 text-primary"}),l(B);var Q=f(B,2),nt=c(Q),F=c(nt),z=f(c(F),2),ft=c(z,!0);l(z),l(F),xt(2),l(nt);var at=f(nt,2),ht=c(at),mt=f(c(ht),2),st=c(mt,!0);l(mt),l(ht);var kt=f(ht,2),yt=c(kt);l(kt),l(at),l(Q),vt((It,St)=>{P(ft,It),P(st,a(g)>0?a(g)+"ms":"---"),Xe(yt,`width: ${St??""}%`)},[()=>gt(a(h)),()=>a(g)>0?Math.min(100,1e3/Math.max(1,a(g))*10):0]),m(W,D)},$$slots:{default:!0}}),l(ot),m(tt,ot)},dt=tt=>{var ot=jn(),lt=G(ot),ut=c(lt),W=c(ut),et=c(W);Ur(et,{class:"w-3 h-3"}),xt(),l(W);var D=f(W,2);te(D),l(ut);var B=f(ut,2);B.__click=pt,l(lt);var rt=f(lt,2);{var Q=F=>{var z=Rn();Bt(z,4,()=>({length:6}),Pt,(ft,at)=>{ee(ft,{children:(ht,mt)=>{var st=Ln();m(ht,st)},$$slots:{default:!0}})}),l(z),m(F,z)},nt=F=>{var z=wt(),ft=G(z);{var at=mt=>{var st=Dn(),kt=c(st);zr(kt,{class:"w-8 h-8 mb-2"}),xt(2),l(st),m(mt,st)},ht=mt=>{var st=Un();Bt(st,5,()=>a(i),Pt,(kt,yt)=>{ee(kt,{children:(It,St)=>{var Et=Fn(),Tt=G(Et),Dt=c(Tt),Ft=c(Dt,!0);l(Dt);var Qt=f(Dt,2);jr(Qt,{class:"w-4 h-4 text-green-500"}),l(Tt);var Mt=f(Tt,2),we=c(Mt,!0);l(Mt);var Zt=f(Mt,2),ye=c(Zt,!0);l(Zt);var We=f(Zt,2),ke=c(We),_r=c(ke);l(ke);var Je=f(ke,2);Je.__click=()=>Br("seeker",a(yt).authority,a(yt).id,100),l(We),vt(xr=>{P(Ft,a(yt).location),P(we,a(yt).nickname),P(ye,a(yt).authority),P(_r,`$${xr??""}/GB`),Je.disabled=a(n)||a(s)},[()=>(a(yt).price/1e9*a(A)*1024).toFixed(4)]),m(It,Et)},$$slots:{default:!0}})}),l(st),m(mt,st)};Y(ft,mt=>{a(i).length===0?mt(at):mt(ht,!1)},!0)}m(F,z)};Y(rt,F=>{a(e)?F(Q):F(nt,!1)})}re(D,()=>a(v),F=>E(v,F)),m(tt,ot)};Y(K,tt=>{a(n)||a(s)?tt(Z):tt(dt,!1)},!0)}m(_,L)};Y(X,_=>{a(o)?_(ct):_(it,!1)})}var $=f(X,2);{var S=_=>{kn(_,{get multiaddr(){return a(v)},onclose:()=>{E(p,!1),w()}})};Y($,_=>{a(p)&&_(S)})}l(H),m(r,q),Ht()}oe(["click"]);var ae={},Hn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},nr={},Nt={};let Oe;const Vn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Nt.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Nt.getSymbolTotalCodewords=function(t){return Vn[t]};Nt.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};Nt.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Oe=t};Nt.isKanjiModeEnabled=function(){return typeof Oe<"u"};Nt.toSJIS=function(t){return Oe(t)};var me={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+i)}}r.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},r.from=function(o,e){if(r.isValid(o))return o;try{return t(o)}catch{return e}}})(me);function or(){this.buffer=[],this.length=0}or.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let i=0;i<t;i++)this.putBit((r>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Kn=or;function ie(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}ie.prototype.set=function(r,t,i,o){const e=r*this.size+t;this.data[e]=i,o&&(this.reservedBit[e]=!0)};ie.prototype.get=function(r,t){return this.data[r*this.size+t]};ie.prototype.xor=function(r,t,i){this.data[r*this.size+t]^=i};ie.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var Wn=ie,ar={};(function(r){const t=Nt.getSymbolSize;r.getRowColCoords=function(o){if(o===1)return[];const e=Math.floor(o/7)+2,n=t(o),d=n===145?26:Math.ceil((n-13)/(2*e-2))*2,s=[n-7];for(let u=1;u<e-1;u++)s[u]=s[u-1]-d;return s.push(6),s.reverse()},r.getPositions=function(o){const e=[],n=r.getRowColCoords(o),d=n.length;for(let s=0;s<d;s++)for(let u=0;u<d;u++)s===0&&u===0||s===0&&u===d-1||s===d-1&&u===0||e.push([n[s],n[u]]);return e}})(ar);var ir={};const Jn=Nt.getSymbolSize,Ye=7;ir.getPositions=function(t){const i=Jn(t);return[[0,0],[i-Ye,0],[0,i-Ye]]};var sr={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){const n=e.size;let d=0,s=0,u=0,v=null,p=null;for(let A=0;A<n;A++){s=u=0,v=p=null;for(let g=0;g<n;g++){let h=e.get(A,g);h===v?s++:(s>=5&&(d+=t.N1+(s-5)),v=h,s=1),h=e.get(g,A),h===p?u++:(u>=5&&(d+=t.N1+(u-5)),p=h,u=1)}s>=5&&(d+=t.N1+(s-5)),u>=5&&(d+=t.N1+(u-5))}return d},r.getPenaltyN2=function(e){const n=e.size;let d=0;for(let s=0;s<n-1;s++)for(let u=0;u<n-1;u++){const v=e.get(s,u)+e.get(s,u+1)+e.get(s+1,u)+e.get(s+1,u+1);(v===4||v===0)&&d++}return d*t.N2},r.getPenaltyN3=function(e){const n=e.size;let d=0,s=0,u=0;for(let v=0;v<n;v++){s=u=0;for(let p=0;p<n;p++)s=s<<1&2047|e.get(v,p),p>=10&&(s===1488||s===93)&&d++,u=u<<1&2047|e.get(p,v),p>=10&&(u===1488||u===93)&&d++}return d*t.N3},r.getPenaltyN4=function(e){let n=0;const d=e.data.length;for(let u=0;u<d;u++)n+=e.data[u];return Math.abs(Math.ceil(n*100/d/5)-10)*t.N4};function i(o,e,n){switch(o){case r.Patterns.PATTERN000:return(e+n)%2===0;case r.Patterns.PATTERN001:return e%2===0;case r.Patterns.PATTERN010:return n%3===0;case r.Patterns.PATTERN011:return(e+n)%3===0;case r.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2===0;case r.Patterns.PATTERN101:return e*n%2+e*n%3===0;case r.Patterns.PATTERN110:return(e*n%2+e*n%3)%2===0;case r.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}r.applyMask=function(e,n){const d=n.size;for(let s=0;s<d;s++)for(let u=0;u<d;u++)n.isReserved(u,s)||n.xor(u,s,i(e,u,s))},r.getBestMask=function(e,n){const d=Object.keys(r.Patterns).length;let s=0,u=1/0;for(let v=0;v<d;v++){n(v),r.applyMask(v,e);const p=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(v,e),p<u&&(u=p,s=v)}return s}})(sr);var be={};const $t=me,se=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],de=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];be.getBlocksCount=function(t,i){switch(i){case $t.L:return se[(t-1)*4+0];case $t.M:return se[(t-1)*4+1];case $t.Q:return se[(t-1)*4+2];case $t.H:return se[(t-1)*4+3];default:return}};be.getTotalCodewordsCount=function(t,i){switch(i){case $t.L:return de[(t-1)*4+0];case $t.M:return de[(t-1)*4+1];case $t.Q:return de[(t-1)*4+2];case $t.H:return de[(t-1)*4+3];default:return}};var dr={},_e={};const Xt=new Uint8Array(512),ue=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)Xt[i]=t,ue[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)Xt[i]=Xt[i-255]})();_e.log=function(t){if(t<1)throw new Error("log("+t+")");return ue[t]};_e.exp=function(t){return Xt[t]};_e.mul=function(t,i){return t===0||i===0?0:Xt[ue[t]+ue[i]]};(function(r){const t=_e;r.mul=function(o,e){const n=new Uint8Array(o.length+e.length-1);for(let d=0;d<o.length;d++)for(let s=0;s<e.length;s++)n[d+s]^=t.mul(o[d],e[s]);return n},r.mod=function(o,e){let n=new Uint8Array(o);for(;n.length-e.length>=0;){const d=n[0];for(let u=0;u<e.length;u++)n[u]^=t.mul(e[u],d);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n},r.generateECPolynomial=function(o){let e=new Uint8Array([1]);for(let n=0;n<o;n++)e=r.mul(e,new Uint8Array([1,t.exp(n)]));return e}})(dr);const lr=dr;function ze(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}ze.prototype.initialize=function(t){this.degree=t,this.genPoly=lr.generateECPolynomial(this.degree)};ze.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const o=lr.mod(i,this.genPoly),e=this.degree-o.length;if(e>0){const n=new Uint8Array(this.degree);return n.set(o,e),n}return o};var Gn=ze,cr={},Rt={},He={};He.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var At={};const ur="[0-9]+",Yn="[A-Z $%*+\\-./:]+";let ne="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ne=ne.replace(/u/g,"\\u");const qn="(?:(?![A-Z0-9 $%*+\\-./:]|"+ne+`)(?:.|[\r
]))+`;At.KANJI=new RegExp(ne,"g");At.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");At.BYTE=new RegExp(qn,"g");At.NUMERIC=new RegExp(ur,"g");At.ALPHANUMERIC=new RegExp(Yn,"g");const Qn=new RegExp("^"+ne+"$"),Zn=new RegExp("^"+ur+"$"),Xn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");At.testKanji=function(t){return Qn.test(t)};At.testNumeric=function(t){return Zn.test(t)};At.testAlphanumeric=function(t){return Xn.test(t)};(function(r){const t=He,i=At;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(n,d){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!t.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?n.ccBits[0]:d<27?n.ccBits[1]:n.ccBits[2]},r.getBestModeForData=function(n){return i.testNumeric(n)?r.NUMERIC:i.testAlphanumeric(n)?r.ALPHANUMERIC:i.testKanji(n)?r.KANJI:r.BYTE},r.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},r.isValid=function(n){return n&&n.bit&&n.ccBits};function o(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+e)}}r.from=function(n,d){if(r.isValid(n))return n;try{return o(n)}catch{return d}}})(Rt);(function(r){const t=Nt,i=be,o=me,e=Rt,n=He,d=7973,s=t.getBCHDigit(d);function u(g,h,x){for(let k=1;k<=40;k++)if(h<=r.getCapacity(k,x,g))return k}function v(g,h){return e.getCharCountIndicator(g,h)+4}function p(g,h){let x=0;return g.forEach(function(k){const j=v(k.mode,h);x+=j+k.getBitsLength()}),x}function A(g,h){for(let x=1;x<=40;x++)if(p(g,x)<=r.getCapacity(x,h,e.MIXED))return x}r.from=function(h,x){return n.isValid(h)?parseInt(h,10):x},r.getCapacity=function(h,x,k){if(!n.isValid(h))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=e.BYTE);const j=t.getSymbolTotalCodewords(h),b=i.getTotalCodewordsCount(h,x),C=(j-b)*8;if(k===e.MIXED)return C;const y=C-v(k,h);switch(k){case e.NUMERIC:return Math.floor(y/10*3);case e.ALPHANUMERIC:return Math.floor(y/11*2);case e.KANJI:return Math.floor(y/13);case e.BYTE:default:return Math.floor(y/8)}},r.getBestVersionForData=function(h,x){let k;const j=o.from(x,o.M);if(Array.isArray(h)){if(h.length>1)return A(h,j);if(h.length===0)return 1;k=h[0]}else k=h;return u(k.mode,k.getLength(),j)},r.getEncodedBits=function(h){if(!n.isValid(h)||h<7)throw new Error("Invalid QR Code version");let x=h<<12;for(;t.getBCHDigit(x)-s>=0;)x^=d<<t.getBCHDigit(x)-s;return h<<12|x}})(cr);var fr={};const Pe=Nt,vr=1335,to=21522,qe=Pe.getBCHDigit(vr);fr.getEncodedBits=function(t,i){const o=t.bit<<3|i;let e=o<<10;for(;Pe.getBCHDigit(e)-qe>=0;)e^=vr<<Pe.getBCHDigit(e)-qe;return(o<<10|e)^to};var gr={};const eo=Rt;function Jt(r){this.mode=eo.NUMERIC,this.data=r.toString()}Jt.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Jt.prototype.getLength=function(){return this.data.length};Jt.prototype.getBitsLength=function(){return Jt.getBitsLength(this.data.length)};Jt.prototype.write=function(t){let i,o,e;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),e=parseInt(o,10),t.put(e,10);const n=this.data.length-i;n>0&&(o=this.data.substr(i),e=parseInt(o,10),t.put(e,n*3+1))};var ro=Jt;const no=Rt,Ce=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Gt(r){this.mode=no.ALPHANUMERIC,this.data=r}Gt.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Gt.prototype.getLength=function(){return this.data.length};Gt.prototype.getBitsLength=function(){return Gt.getBitsLength(this.data.length)};Gt.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let o=Ce.indexOf(this.data[i])*45;o+=Ce.indexOf(this.data[i+1]),t.put(o,11)}this.data.length%2&&t.put(Ce.indexOf(this.data[i]),6)};var oo=Gt;const ao=Rt;function Yt(r){this.mode=ao.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}Yt.getBitsLength=function(t){return t*8};Yt.prototype.getLength=function(){return this.data.length};Yt.prototype.getBitsLength=function(){return Yt.getBitsLength(this.data.length)};Yt.prototype.write=function(r){for(let t=0,i=this.data.length;t<i;t++)r.put(this.data[t],8)};var io=Yt;const so=Rt,lo=Nt;function qt(r){this.mode=so.KANJI,this.data=r}qt.getBitsLength=function(t){return t*13};qt.prototype.getLength=function(){return this.data.length};qt.prototype.getBitsLength=function(){return qt.getBitsLength(this.data.length)};qt.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let i=lo.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),r.put(i,13)}};var co=qt,pr={exports:{}};(function(r){var t={single_source_shortest_paths:function(i,o,e){var n={},d={};d[o]=0;var s=t.PriorityQueue.make();s.push(o,0);for(var u,v,p,A,g,h,x,k,j;!s.empty();){u=s.pop(),v=u.value,A=u.cost,g=i[v]||{};for(p in g)g.hasOwnProperty(p)&&(h=g[p],x=A+h,k=d[p],j=typeof d[p]>"u",(j||k>x)&&(d[p]=x,s.push(p,x),n[p]=v))}if(typeof e<"u"&&typeof d[e]>"u"){var b=["Could not find a path from ",o," to ",e,"."].join("");throw new Error(b)}return n},extract_shortest_path_from_predecessor_list:function(i,o){for(var e=[],n=o;n;)e.push(n),i[n],n=i[n];return e.reverse(),e},find_path:function(i,o,e){var n=t.single_source_shortest_paths(i,o,e);return t.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(i){var o=t.PriorityQueue,e={},n;i=i||{};for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e.queue=[],e.sorter=i.sorter||o.default_sorter,e},default_sorter:function(i,o){return i.cost-o.cost},push:function(i,o){var e={value:i,cost:o};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(pr);var uo=pr.exports;(function(r){const t=Rt,i=ro,o=oo,e=io,n=co,d=At,s=Nt,u=uo;function v(b){return unescape(encodeURIComponent(b)).length}function p(b,C,y){const w=[];let I;for(;(I=b.exec(y))!==null;)w.push({data:I[0],index:I.index,mode:C,length:I[0].length});return w}function A(b){const C=p(d.NUMERIC,t.NUMERIC,b),y=p(d.ALPHANUMERIC,t.ALPHANUMERIC,b);let w,I;return s.isKanjiModeEnabled()?(w=p(d.BYTE,t.BYTE,b),I=p(d.KANJI,t.KANJI,b)):(w=p(d.BYTE_KANJI,t.BYTE,b),I=[]),C.concat(y,w,I).sort(function(V,gt){return V.index-gt.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function g(b,C){switch(C){case t.NUMERIC:return i.getBitsLength(b);case t.ALPHANUMERIC:return o.getBitsLength(b);case t.KANJI:return n.getBitsLength(b);case t.BYTE:return e.getBitsLength(b)}}function h(b){return b.reduce(function(C,y){const w=C.length-1>=0?C[C.length-1]:null;return w&&w.mode===y.mode?(C[C.length-1].data+=y.data,C):(C.push(y),C)},[])}function x(b){const C=[];for(let y=0;y<b.length;y++){const w=b[y];switch(w.mode){case t.NUMERIC:C.push([w,{data:w.data,mode:t.ALPHANUMERIC,length:w.length},{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.ALPHANUMERIC:C.push([w,{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.KANJI:C.push([w,{data:w.data,mode:t.BYTE,length:v(w.data)}]);break;case t.BYTE:C.push([{data:w.data,mode:t.BYTE,length:v(w.data)}])}}return C}function k(b,C){const y={},w={start:{}};let I=["start"];for(let O=0;O<b.length;O++){const V=b[O],gt=[];for(let _t=0;_t<V.length;_t++){const pt=V[_t],R=""+O+_t;gt.push(R),y[R]={node:pt,lastCount:0},w[R]={};for(let q=0;q<I.length;q++){const T=I[q];y[T]&&y[T].node.mode===pt.mode?(w[T][R]=g(y[T].lastCount+pt.length,pt.mode)-g(y[T].lastCount,pt.mode),y[T].lastCount+=pt.length):(y[T]&&(y[T].lastCount=pt.length),w[T][R]=g(pt.length,pt.mode)+4+t.getCharCountIndicator(pt.mode,C))}}I=gt}for(let O=0;O<I.length;O++)w[I[O]].end=0;return{map:w,table:y}}function j(b,C){let y;const w=t.getBestModeForData(b);if(y=t.from(C,w),y!==t.BYTE&&y.bit<w.bit)throw new Error('"'+b+'" cannot be encoded with mode '+t.toString(y)+`.
 Suggested mode is: `+t.toString(w));switch(y===t.KANJI&&!s.isKanjiModeEnabled()&&(y=t.BYTE),y){case t.NUMERIC:return new i(b);case t.ALPHANUMERIC:return new o(b);case t.KANJI:return new n(b);case t.BYTE:return new e(b)}}r.fromArray=function(C){return C.reduce(function(y,w){return typeof w=="string"?y.push(j(w,null)):w.data&&y.push(j(w.data,w.mode)),y},[])},r.fromString=function(C,y){const w=A(C,s.isKanjiModeEnabled()),I=x(w),O=k(I,y),V=u.find_path(O.map,"start","end"),gt=[];for(let _t=1;_t<V.length-1;_t++)gt.push(O.table[V[_t]].node);return r.fromArray(h(gt))},r.rawSplit=function(C){return r.fromArray(A(C,s.isKanjiModeEnabled()))}})(gr);const xe=Nt,Ee=me,fo=Kn,vo=Wn,go=ar,po=ir,$e=sr,Le=be,ho=Gn,fe=cr,mo=fr,bo=Rt,Se=gr;function _o(r,t){const i=r.size,o=po.getPositions(t);for(let e=0;e<o.length;e++){const n=o[e][0],d=o[e][1];for(let s=-1;s<=7;s++)if(!(n+s<=-1||i<=n+s))for(let u=-1;u<=7;u++)d+u<=-1||i<=d+u||(s>=0&&s<=6&&(u===0||u===6)||u>=0&&u<=6&&(s===0||s===6)||s>=2&&s<=4&&u>=2&&u<=4?r.set(n+s,d+u,!0,!0):r.set(n+s,d+u,!1,!0))}}function xo(r){const t=r.size;for(let i=8;i<t-8;i++){const o=i%2===0;r.set(i,6,o,!0),r.set(6,i,o,!0)}}function wo(r,t){const i=go.getPositions(t);for(let o=0;o<i.length;o++){const e=i[o][0],n=i[o][1];for(let d=-2;d<=2;d++)for(let s=-2;s<=2;s++)d===-2||d===2||s===-2||s===2||d===0&&s===0?r.set(e+d,n+s,!0,!0):r.set(e+d,n+s,!1,!0)}}function yo(r,t){const i=r.size,o=fe.getEncodedBits(t);let e,n,d;for(let s=0;s<18;s++)e=Math.floor(s/3),n=s%3+i-8-3,d=(o>>s&1)===1,r.set(e,n,d,!0),r.set(n,e,d,!0)}function Ne(r,t,i){const o=r.size,e=mo.getEncodedBits(t,i);let n,d;for(n=0;n<15;n++)d=(e>>n&1)===1,n<6?r.set(n,8,d,!0):n<8?r.set(n+1,8,d,!0):r.set(o-15+n,8,d,!0),n<8?r.set(8,o-n-1,d,!0):n<9?r.set(8,15-n-1+1,d,!0):r.set(8,15-n-1,d,!0);r.set(o-8,8,1,!0)}function ko(r,t){const i=r.size;let o=-1,e=i-1,n=7,d=0;for(let s=i-1;s>0;s-=2)for(s===6&&s--;;){for(let u=0;u<2;u++)if(!r.isReserved(e,s-u)){let v=!1;d<t.length&&(v=(t[d]>>>n&1)===1),r.set(e,s-u,v),n--,n===-1&&(d++,n=7)}if(e+=o,e<0||i<=e){e-=o,o=-o;break}}}function Co(r,t,i){const o=new fo;i.forEach(function(u){o.put(u.mode.bit,4),o.put(u.getLength(),bo.getCharCountIndicator(u.mode,r)),u.write(o)});const e=xe.getSymbolTotalCodewords(r),n=Le.getTotalCodewordsCount(r,t),d=(e-n)*8;for(o.getLengthInBits()+4<=d&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const s=(d-o.getLengthInBits())/8;for(let u=0;u<s;u++)o.put(u%2?17:236,8);return Eo(o,r,t)}function Eo(r,t,i){const o=xe.getSymbolTotalCodewords(t),e=Le.getTotalCodewordsCount(t,i),n=o-e,d=Le.getBlocksCount(t,i),s=o%d,u=d-s,v=Math.floor(o/d),p=Math.floor(n/d),A=p+1,g=v-p,h=new ho(g);let x=0;const k=new Array(d),j=new Array(d);let b=0;const C=new Uint8Array(r.buffer);for(let V=0;V<d;V++){const gt=V<u?p:A;k[V]=C.slice(x,x+gt),j[V]=h.encode(k[V]),x+=gt,b=Math.max(b,gt)}const y=new Uint8Array(o);let w=0,I,O;for(I=0;I<b;I++)for(O=0;O<d;O++)I<k[O].length&&(y[w++]=k[O][I]);for(I=0;I<g;I++)for(O=0;O<d;O++)y[w++]=j[O][I];return y}function So(r,t,i,o){let e;if(Array.isArray(r))e=Se.fromArray(r);else if(typeof r=="string"){let v=t;if(!v){const p=Se.rawSplit(r);v=fe.getBestVersionForData(p,i)}e=Se.fromString(r,v||40)}else throw new Error("Invalid data");const n=fe.getBestVersionForData(e,i);if(!n)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=n;else if(t<n)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+n+`.
`);const d=Co(t,i,e),s=xe.getSymbolSize(t),u=new vo(s);return _o(u,t),xo(u),wo(u,t),Ne(u,i,0),t>=7&&yo(u,t),ko(u,d),isNaN(o)&&(o=$e.getBestMask(u,Ne.bind(null,u,i))),$e.applyMask(o,u),Ne(u,i,o),{modules:u,version:t,errorCorrectionLevel:i,maskPattern:o,segments:e}}nr.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let o=Ee.M,e,n;return typeof i<"u"&&(o=Ee.from(i.errorCorrectionLevel,Ee.M),e=fe.from(i.version),n=$e.from(i.maskPattern),i.toSJISFunc&&xe.setToSJISFunction(i.toSJISFunc)),So(t,e,o,n)};var hr={},Ve={};(function(r){function t(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let o=i.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+i);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(n){return[n,n]}))),o.length===6&&o.push("F","F");const e=parseInt(o.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+o.slice(0,6).join("")}}r.getOptions=function(o){o||(o={}),o.color||(o.color={});const e=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,n=o.width&&o.width>=21?o.width:void 0,d=o.scale||4;return{width:n,scale:n?4:d,margin:e,color:{dark:t(o.color.dark||"#000000ff"),light:t(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},r.getScale=function(o,e){return e.width&&e.width>=o+e.margin*2?e.width/(o+e.margin*2):e.scale},r.getImageWidth=function(o,e){const n=r.getScale(o,e);return Math.floor((o+e.margin*2)*n)},r.qrToImageData=function(o,e,n){const d=e.modules.size,s=e.modules.data,u=r.getScale(d,n),v=Math.floor((d+n.margin*2)*u),p=n.margin*u,A=[n.color.light,n.color.dark];for(let g=0;g<v;g++)for(let h=0;h<v;h++){let x=(g*v+h)*4,k=n.color.light;if(g>=p&&h>=p&&g<v-p&&h<v-p){const j=Math.floor((g-p)/u),b=Math.floor((h-p)/u);k=A[s[j*d+b]?1:0]}o[x++]=k.r,o[x++]=k.g,o[x++]=k.b,o[x]=k.a}}})(Ve);(function(r){const t=Ve;function i(e,n,d){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=d,n.width=d,n.style.height=d+"px",n.style.width=d+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(n,d,s){let u=s,v=d;typeof u>"u"&&(!d||!d.getContext)&&(u=d,d=void 0),d||(v=o()),u=t.getOptions(u);const p=t.getImageWidth(n.modules.size,u),A=v.getContext("2d"),g=A.createImageData(p,p);return t.qrToImageData(g.data,n,u),i(A,v,p),A.putImageData(g,0,0),v},r.renderToDataURL=function(n,d,s){let u=s;typeof u>"u"&&(!d||!d.getContext)&&(u=d,d=void 0),u||(u={});const v=r.render(n,d,u),p=u.type||"image/png",A=u.rendererOpts||{};return v.toDataURL(p,A.quality)}})(hr);var mr={};const No=Ve;function Qe(r,t){const i=r.a/255,o=t+'="'+r.hex+'"';return i<1?o+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':o}function Te(r,t,i){let o=r+t;return typeof i<"u"&&(o+=" "+i),o}function To(r,t,i){let o="",e=0,n=!1,d=0;for(let s=0;s<r.length;s++){const u=Math.floor(s%t),v=Math.floor(s/t);!u&&!n&&(n=!0),r[s]?(d++,s>0&&u>0&&r[s-1]||(o+=n?Te("M",u+i,.5+v+i):Te("m",e,0),e=0,n=!1),u+1<t&&r[s+1]||(o+=Te("h",d),d=0)):e++}return o}mr.render=function(t,i,o){const e=No.getOptions(i),n=t.modules.size,d=t.modules.data,s=n+e.margin*2,u=e.color.light.a?"<path "+Qe(e.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",v="<path "+Qe(e.color.dark,"stroke")+' d="'+To(d,n,e.margin)+'"/>',p='viewBox="0 0 '+s+" "+s+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(e.width?'width="'+e.width+'" height="'+e.width+'" ':"")+p+' shape-rendering="crispEdges">'+u+v+`</svg>
`;return typeof o=="function"&&o(null,g),g};const Ao=Hn,Re=nr,br=hr,Io=mr;function Ke(r,t,i,o,e){const n=[].slice.call(arguments,1),d=n.length,s=typeof n[d-1]=="function";if(!s&&!Ao())throw new Error("Callback required as last argument");if(s){if(d<2)throw new Error("Too few arguments provided");d===2?(e=i,i=t,t=o=void 0):d===3&&(t.getContext&&typeof e>"u"?(e=o,o=void 0):(e=o,o=i,i=t,t=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(i=t,t=o=void 0):d===2&&!t.getContext&&(o=i,i=t,t=void 0),new Promise(function(u,v){try{const p=Re.create(i,o);u(r(p,t,o))}catch(p){v(p)}})}try{const u=Re.create(i,o);e(null,r(u,t,o))}catch(u){e(u)}}ae.create=Re.create;ae.toCanvas=Ke.bind(null,br.render);ae.toDataURL=Ke.bind(null,br.renderToDataURL);ae.toString=Ke.bind(null,function(r,t,i){return Io.render(r,i)});var Mo=N('<div class="h-[60vh] flex items-center justify-center"><!></div>'),Bo=N('<div class="bg-black border border-primary/20 p-2"><img alt="QR Code" class="w-32 h-32"/></div>'),Po=N('<div class="flex justify-between items-start mb-6"><span class="text-xs font-mono text-muted-foreground uppercase tracking-widest"> </span> <button><!></button></div> <div class="flex flex-col md:flex-row gap-8 items-center"><!> <div class="flex-1 w-full"><div class="text-5xl font-bold text-white mb-2"> <span class="text-2xl text-primary">SOL</span></div> <div class="flex flex-col gap-2 mt-4"><span class="text-[10px] font-mono text-muted-foreground uppercase">Public Key</span> <button class="flex items-center justify-between bg-card border border-border p-3 hover:border-primary/50 transition-colors group text-left w-full"><span class="text-xs font-mono text-muted-foreground truncate mr-2"> </span> <!></button></div></div></div>',1),$o=N('<div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><!> <div class="bg-card border border-border p-8 flex flex-col relative overflow-hidden"><div class="absolute top-0 right-0 p-4 opacity-10"><!></div> <h3 class="text-xl font-bold mb-6 flex items-center gap-2 italic relative z-10"><!> DISPATCH FUNDS</h3> <div class="space-y-6 relative z-10"><div><label class="block text-[10px] font-mono text-muted-foreground mb-2 uppercase tracking-widest">Recipient</label> <input type="text" class="w-full bg-black border border-border p-4 text-sm focus:border-primary outline-none text-white font-mono placeholder:text-muted-foreground/30 transition-colors" placeholder="Solana Address..."/></div> <div><label class="block text-[10px] font-mono text-muted-foreground mb-2 uppercase tracking-widest">Amount</label> <div class="relative"><input type="number" class="w-full bg-black border border-border p-4 text-xl focus:border-primary outline-none text-white font-mono transition-colors pr-16" placeholder="0.00"/> <button class="absolute right-4 top-1/2 -translate-y-1/2 text-xs text-primary font-bold hover:text-white transition-colors border border-primary/30 px-2 py-1 bg-primary/10 hover:bg-primary/20">MAX</button></div></div></div> <button class="w-full bg-primary text-black font-bold py-4 mt-8 hover:bg-white transition-all active:scale-[0.98] relative z-10 uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div>');function Lo(r,t){zt(t,!1);let i=Ae(t,"profile",8,"warden"),o=U(0),e=U("Loading..."),n=U(""),d=U(!0),s=U(!1),u=U(""),v=U("");async function p(){E(d,!0);try{const b=await $r();E(e,b[i()]||"Address not found"),a(e)&&a(e)!=="Address not found"&&E(n,await ae.toDataURL(a(e),{color:{dark:"#fed600",light:"#00000000"},margin:1}));const C=await ce(i());E(o,C.lamports/1e9)}catch(b){console.error(b)}finally{E(d,!1)}}async function A(){if(!a(u)||!a(v)){bt("Please provide recipient and amount","error");return}E(s,!0);try{const b=await Lr(i(),a(u),parseFloat(a(v)));bt(`Transfer Successful: ${b.signature.slice(0,8)}...`,"success"),E(u,""),E(v,""),p()}catch(b){bt(`Transfer Failed: ${b}`,"error")}finally{E(s,!1)}}function g(){navigator.clipboard.writeText(a(e)),bt("Address copied to clipboard","info")}Ut(()=>wr(i()),()=>{i()&&p()}),ve(),Ot();var h=wt(),x=G(h);{var k=b=>{var C=Mo(),y=c(C);he(y),l(C),m(b,C)},j=b=>{var C=$o(),y=c(C);jt(y,{children:(it,$)=>{var S=Po(),_=G(S),L=c(_),K=c(L);l(L);var Z=f(L,2);Z.__click=p;var dt=c(Z);{let F=De(()=>a(d)||a(s)?"animate-spin":"");je(dt,{get class(){return`w-4 h-4 text-muted-foreground hover:text-white ${a(F)??""}`}})}l(Z),l(_);var tt=f(_,2),ot=c(tt);{var lt=F=>{var z=Bo(),ft=c(z);l(z),vt(()=>Pr(ft,"src",a(n))),m(F,z)};Y(ot,F=>{a(n)&&F(lt)})}var ut=f(ot,2),W=c(ut),et=c(W);xt(),l(W);var D=f(W,2),B=f(c(D),2);B.__click=g;var rt=c(B),Q=c(rt,!0);l(rt);var nt=f(rt,2);Be(nt,{class:"w-3 h-3 text-muted-foreground group-hover:text-primary"}),l(B),l(D),l(ut),l(tt),vt(F=>{P(K,`${i()??""} WALLET`),Z.disabled=a(d)||a(s),P(et,`${F??""} `),P(Q,a(e))},[()=>(a(o),J(()=>a(o).toFixed(4)))]),m(it,S)},$$slots:{default:!0}});var w=f(y,2),I=c(w),O=c(I);Rr(O,{class:"w-32 h-32"}),l(I);var V=f(I,2),gt=c(V);tr(gt,{class:"w-5 h-5 text-primary"}),xt(),l(V);var _t=f(V,2),pt=c(_t),R=f(c(pt),2);te(R),l(pt);var q=f(pt,2),T=f(c(q),2),M=c(T);te(M);var H=f(M,2);H.__click=()=>E(v,Math.max(0,a(o)-.005).toFixed(4)),l(T),l(q),l(_t);var X=f(_t,2);X.__click=A;var ct=c(X,!0);l(X),l(w),l(C),vt(()=>{X.disabled=a(s),P(ct,a(s)?"Processing...":"Execute Transaction")}),re(R,()=>a(u),it=>E(u,it)),re(M,()=>a(v),it=>E(v,it)),m(b,C)};Y(x,b=>{a(d)?b(k):b(j,!1)})}m(r,h),Ht()}oe(["click"]);var Ro=N('<div class="flex gap-2 group hover:bg-white/5 px-1 py-0.5 rounded transition-colors"><span class="text-[10px] text-muted-foreground/50 tabular-nums shrink-0"> </span> <span> </span> <span class="text-muted-foreground break-all whitespace-pre-wrap"> </span></div>'),Do=N('<p class="text-muted-foreground/30 italic">Connecting to node telemetry stream...</p>'),Fo=N('<div class="h-[60vh] bg-black border border-border p-4 font-mono text-xs overflow-y-auto"><div class="text-primary mb-4 sticky top-0 bg-black/80 backdrop-blur pb-2 border-b border-white/5">root@zarkham-node:~# tail -f session.log</div> <div class="space-y-1"><!> <!> <p class="animate-pulse text-primary font-bold">_</p></div></div>');function Uo(r,t){zt(t,!1);let i=U([]),o=null,e=U();ge(()=>{o=new EventSource("/api/logs"),o.onmessage=g=>{const h=JSON.parse(g.data);E(i,[...a(i),h].slice(-200)),setTimeout(()=>{a(e)&&yr(e,a(e).scrollTop=a(e).scrollHeight)},0)},o.onerror=g=>{console.error("EventSource failed:",g)}}),pe(()=>{o&&o.close()});function n(g){return new Date(g*1e3).toLocaleTimeString([],{hour12:!1})}function d(g){return g.includes("31")?"text-red-500":g.includes("32")?"text-green-500":g.includes("33")?"text-yellow-500":g.includes("34")?"text-blue-500":g.includes("35")?"text-purple-500":g.includes("36")?"text-cyan-500":"text-muted-foreground"}Ot();var s=Fo(),u=f(c(s),2),v=c(u);Bt(v,1,()=>a(i),Pt,(g,h)=>{var x=Ro(),k=c(x),j=c(k);l(k);var b=f(k,2),C=c(b);l(b);var y=f(b,2),w=c(y,!0);l(y),l(x),vt((I,O)=>{P(j,`[${I??""}]`),Ct(b,1,`font-bold shrink-0 ${O??""}`),P(C,`[${a(h).prefix??""}]`),P(w,a(h).message)},[()=>n(a(h).timestamp),()=>d(a(h).color)]),m(g,x)});var p=f(v,2);{var A=g=>{var h=Do();m(g,h)};Y(p,g=>{a(i).length===0&&g(A)})}xt(2),l(u),l(s),Hr(s,g=>E(e,g),()=>a(e)),m(r,s),Ht()}var jo=N('<div class="flex items-center justify-center h-64"><!></div>'),Oo=N('<div class="bg-card border border-border p-4 flex items-center justify-between hover:border-primary/30 transition-colors group"><div class="flex items-center gap-4"><div class="p-2 bg-secondary rounded-none"><!></div> <div><div class="font-bold text-sm"> </div> <div class="text-[10px] font-mono text-muted-foreground flex items-center gap-1"><!> </div></div></div> <div class="text-right"><div class="font-mono font-bold"> </div> <div class="text-[10px] text-muted-foreground truncate w-24"> </div></div></div>'),zo=N('<div class="text-center text-muted-foreground py-12 text-sm">No transaction history found.</div>'),Ho=N('<div class="space-y-2"><!> <!></div>'),Vo=N('<div class="bg-card border border-border p-4 flex items-center justify-between hover:border-primary/30 transition-colors"><div><div class="font-bold text-sm"> </div> <div class="text-[10px] font-mono text-muted-foreground"> </div></div> <div class="text-right font-mono text-primary"> </div></div>'),Ko=N('<div class="text-center text-muted-foreground py-12 text-sm">No token history found.</div>'),Wo=N('<div class="space-y-2"><!> <!></div>'),Jo=N('<div class="bg-card border border-border p-4 flex items-center justify-between"><div><div class="font-bold text-sm">Session Ended</div> <div class="text-[10px] font-mono text-muted-foreground"> </div></div> <div class="text-right text-xs"><span class="block text-primary"> </span> <span class="text-muted-foreground"> </span></div></div>'),Go=N('<div class="text-center text-muted-foreground py-12 text-sm">No connection history found.</div>'),Yo=N('<div class="space-y-2"><!> <!></div>'),qo=N('<div class="bg-card border border-border p-4 flex items-center justify-between"><div class="flex items-center gap-3"><!> <div><div class="font-bold text-sm">Proof Submitted</div> <div class="text-[10px] font-mono text-muted-foreground"> </div></div></div> <div class="font-mono text-primary text-sm"> </div></div>'),Qo=N('<div class="text-center text-muted-foreground py-12 text-sm">No proofs submitted.</div>'),Zo=N('<div class="space-y-2"><!> <!></div>'),Xo=N("<!> <!> <!> <!>",1),ta=N('<div class="space-y-6"><div class="flex gap-4 border-b border-border pb-1"><button>SOLANA</button> <button>ARKHAM</button> <button>CONNECTIONS</button> <button>THROUGHPUT</button></div> <div class="min-h-[400px]"><!></div></div>');function ea(r,t){zt(t,!1);const i=()=>le(Ue,"$activeMode",o),[o,e]=Fe();let n=U({solHistory:[],arkhamHistory:[],connectionHistory:[],throughputHistory:[]}),d=U(!0),s=U("sol");async function u(){E(d,!0),E(n,await Ze(i())),E(d,!1)}function v(w){return new Date(w).toLocaleString()}Ut(()=>i(),()=>{i()&&u()}),ve(),Ot();var p=ta(),A=c(p),g=c(A);g.__click=()=>E(s,"sol");var h=f(g,2);h.__click=()=>E(s,"arkham");var x=f(h,2);x.__click=()=>E(s,"connections");var k=f(x,2);k.__click=()=>E(s,"throughput"),l(A);var j=f(A,2),b=c(j);{var C=w=>{var I=jo(),O=c(I);he(O),l(I),m(w,I)},y=w=>{var I=Xo(),O=G(I);{var V=M=>{var H=Ho(),X=c(H);Bt(X,1,()=>(a(n),J(()=>a(n).solHistory)),Pt,($,S)=>{var _=Oo(),L=c(_),K=c(L),Z=c(K);{var dt=z=>{Kr(z,{class:"w-4 h-4 text-red-500"})},tt=z=>{Vr(z,{class:"w-4 h-4 text-green-500"})};Y(Z,z=>{a(S),J(()=>a(S).type.includes("Sent"))?z(dt):z(tt,!1)})}l(K);var ot=f(K,2),lt=c(ot),ut=c(lt,!0);l(lt);var W=f(lt,2),et=c(W);Jr(et,{class:"w-3 h-3"});var D=f(et);l(W),l(ot),l(L);var B=f(L,2),rt=c(B),Q=c(rt);l(rt);var nt=f(rt,2),F=c(nt,!0);l(nt),l(B),l(_),vt((z,ft)=>{P(ut,(a(S),J(()=>a(S).type))),P(D,` ${z??""}`),P(Q,`${ft??""} SOL`),P(F,(a(S),J(()=>a(S).signature)))},[()=>(a(S),J(()=>v(a(S).timestamp))),()=>(a(S),J(()=>(a(S).amount/1e9).toFixed(4)))]),m($,_)});var ct=f(X,2);{var it=$=>{var S=zo();m($,S)};Y(ct,$=>{a(n),J(()=>a(n).solHistory.length===0)&&$(it)})}l(H),m(M,H)};Y(O,M=>{a(s),a(n),J(()=>a(s)==="sol"&&a(n).solHistory)&&M(V)})}var gt=f(O,2);{var _t=M=>{var H=Wo(),X=c(H);Bt(X,1,()=>(a(n),J(()=>a(n).arkhamHistory)),Pt,($,S)=>{var _=Vo(),L=c(_),K=c(L),Z=c(K,!0);l(K);var dt=f(K,2),tt=c(dt,!0);l(dt),l(L);var ot=f(L,2),lt=c(ot);l(ot),l(_),vt((ut,W)=>{P(Z,(a(S),J(()=>a(S).type))),P(tt,ut),P(lt,`${W??""} ARKHAM`)},[()=>(a(S),J(()=>v(a(S).timestamp))),()=>(a(S),J(()=>(a(S).amount/1e9).toFixed(4)))]),m($,_)});var ct=f(X,2);{var it=$=>{var S=Ko();m($,S)};Y(ct,$=>{a(n),J(()=>a(n).arkhamHistory.length===0)&&$(it)})}l(H),m(M,H)};Y(gt,M=>{a(s),a(n),J(()=>a(s)==="arkham"&&a(n).arkhamHistory)&&M(_t)})}var pt=f(gt,2);{var R=M=>{var H=Yo(),X=c(H);Bt(X,1,()=>(a(n),J(()=>a(n).connectionHistory)),Pt,($,S)=>{var _=Jo(),L=c(_),K=f(c(L),2),Z=c(K,!0);l(K),l(L);var dt=f(L,2),tt=c(dt),ot=c(tt);l(tt);var lt=f(tt,2),ut=c(lt);l(lt),l(dt),l(_),vt((W,et,D)=>{P(Z,W),P(ot,`${et??""} MB`),P(ut,`EARNED: ${D??""} SOL`)},[()=>(a(S),J(()=>v(a(S).timestamp))),()=>(a(S),J(()=>(a(S).bandwidth/1024/1024).toFixed(2))),()=>(a(S),J(()=>(a(S).earnings/1e9).toFixed(4)))]),m($,_)});var ct=f(X,2);{var it=$=>{var S=Go();m($,S)};Y(ct,$=>{a(n),J(()=>a(n).connectionHistory.length===0)&&$(it)})}l(H),m(M,H)};Y(pt,M=>{a(s),a(n),J(()=>a(s)==="connections"&&a(n).connectionHistory)&&M(R)})}var q=f(pt,2);{var T=M=>{var H=Zo(),X=c(H);Bt(X,1,()=>(a(n),J(()=>a(n).throughputHistory)),Pt,($,S)=>{var _=qo(),L=c(_),K=c(L);Gr(K,{class:"w-4 h-4 text-muted-foreground"});var Z=f(K,2),dt=f(c(Z),2),tt=c(dt,!0);l(dt),l(Z),l(L);var ot=f(L,2),lt=c(ot);l(ot),l(_),vt(ut=>{P(tt,ut),P(lt,`${a(S),J(()=>a(S).mbConsumed)??""} MB`)},[()=>(a(S),J(()=>v(a(S).timestamp)))]),m($,_)});var ct=f(X,2);{var it=$=>{var S=Qo();m($,S)};Y(ct,$=>{a(n),J(()=>a(n).throughputHistory.length===0)&&$(it)})}l(H),m(M,H)};Y(q,M=>{a(s),a(n),J(()=>a(s)==="throughput"&&a(n).throughputHistory)&&M(T)})}m(w,I)};Y(b,w=>{a(d)?w(C):w(y,!1)})}l(j),l(p),vt(()=>{Ct(g,1,`px-4 py-2 text-xs font-bold font-mono tracking-widest hover:text-primary transition-colors ${a(s)==="sol"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`),Ct(h,1,`px-4 py-2 text-xs font-bold font-mono tracking-widest hover:text-primary transition-colors ${a(s)==="arkham"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`),Ct(x,1,`px-4 py-2 text-xs font-bold font-mono tracking-widest hover:text-primary transition-colors ${a(s)==="connections"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`),Ct(k,1,`px-4 py-2 text-xs font-bold font-mono tracking-widest hover:text-primary transition-colors ${a(s)==="throughput"?"text-primary border-b-2 border-primary":"text-muted-foreground"}`)}),m(r,p),Ht(),e()}oe(["click"]);function ha(r){const t=()=>le(Cr,"$activeTab",o),i=()=>le(Ue,"$activeMode",o),[o,e]=Fe();var n=wt(),d=G(n);{var s=v=>{var p=wt(),A=G(p);{var g=x=>{mn(x,{})},h=x=>{zn(x,{})};Y(A,x=>{i()==="warden"?x(g):x(h,!1)})}m(v,p)},u=v=>{var p=wt(),A=G(p);{var g=x=>{Lo(x,{get profile(){return i()}})},h=x=>{var k=wt(),j=G(k);{var b=y=>{ea(y,{})},C=y=>{var w=wt(),I=G(w);{var O=V=>{Uo(V,{})};Y(I,V=>{t()==="console"&&V(O)},!0)}m(y,w)};Y(j,y=>{t()==="history"?y(b):y(C,!1)},!0)}m(x,k)};Y(A,x=>{t()==="wallet"?x(g):x(h,!1)},!0)}m(v,p)};Y(d,v=>{t()==="overview"?v(s):v(u,!1)})}m(r,n),e()}export{ha as component};
